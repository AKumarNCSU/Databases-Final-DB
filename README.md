# NOSQL FINAL DB PROJECT
## CS422: Databases Final Exam

Created by Akshat Kumar, Student at NCSSM

Teacher: Mr. Kleiner, Instructor of Engineering/Computer Science at NCSSM

Uses MongoDB's Document Based DB to store values relating to astronomical systems
Uses MongoID (https://github.com/mongodb/mongoid) to run commands in Ruby on Rails to create a MongoDB database

## RAKE AND RAILS IMPLEMENTATION
This database uses 4 rake files for all functions (located in final/lib/tasks/*)
1. import.rake
2. delete.rake
3. show.rake
4. query.rake

import.rake:
    Imports all data into tables while also creating relations using find_by statements
    To run do: "rake import"

delete.rake: 
        Deletes all documents and their data in every collection
        To run do: "rake delete"

show.rake:
    Shows all documents and their data in the form of an array
    To run do: "rake show"

query.rake:
    Runs the 2 queries specified under the Final Project prompt
    2 functions: groupBy and collectThree
    To run do: "rake query"

NOTE: Be sure to run "rake delete" before running "rake import" for a second time!

NOTE: import_test.rake is used for testing purposes:
    Imports test data into tables while also creating relations using find_by statements
    To run do: "rake import_test"

## DATA AND DOCUMENTS
Data Types:
1. Constellations
2. NGC Systems
3. Messier Systems
4. Supernovae
5. Stars
6. Classifications

### Constellation Fields:
    _id: autogenerated id 
    name: name of the constellation
    abbreviation: commonly used abbreviation
    origin: origin of the name from Latin
    meaning: includes extra data

### NGC Fields:
    _id: NGC Number
    name: The official name of the NGC system
    alternate_names: Other Classification names for the NGC System
    type: The type of system (Galaxy, Cluster, etc.)
    NgcM_id: _id used for relating the NGC to a Messier Object and its Constellation
    con: Name of its constellation
    ra: Right Ascension
    d: Declination
    mag: Magnitude
    subr: Surface Brightness
    size_max: Maximum Angular Size
    size_min: Minimum Angular Size
    type_class: Classification within object type
    brstr: Luminosity of Brightest Star
    bchm: BCHM classification
    ngc_descr: A short description of the different bands present in its spectroscope
    notes: Notes on object

### Messier Fields:
    _id: Messier Number
    name: The official name of the Messier System
    NgcM_id: _id used for relating the NGC to a Messier Object and its Constellation
    ngc_name: name of related NGC system
    con: Name of its constellation
    ra: Right Ascension
    d: Declination
    mag: Magnitude
    type: The type of system (Galaxy, Cluster, etc.)
    notes: Notes on object

### Supernova:
    name: The official name of the SuperNova
    disc_date: Date of discovery
    mmax: Maximum Magnitude during the Supernova
    ngc_id: _id of encompassing NGC object
    ngc_name: Name of encompassing NGC object 
    ra: Right Ascension
    d: Declination
    type: Type of supernova (Ia, II, etc.)

### Stars:
    _id: HIP id
    hip: HIP id
    hd: Henry Draper id
    hr: Harvard Revised id
    gl: Gliese Catalog id
    bf: Bayer/Flamstead id
    proper: Proper name of the star
    ra: Right Ascension
        d: Declination
    dist: Distance to star
    pmra: Proper Motion in Right Ascenesion
    pmd: Proper Motion in Declination
    mag: Apparaent Magnitude
    absmag: Absolute Magnitude
    classification_id: _ids of classifications
    spect: Classifications of the star
    ci: Color index of the star
    x: X cartesian coordinate
    y: Y cartesian coordinate
    z: Z cartesian coordinate
    vx: Velocity in X direction
    vy: Velocity in Y direction
    vz: Velocity in Z direction
    constellation_id: _id of encompassing Constellation
    con: Constellation Name
    comp: Number of components of star system
    comp_primary: Number of primary components of star system
    lum: Luminosity of star
    var: Variable star type
    var_max: Maximum variable luminosity of star
    var_min: Minimum variable luminosity of star

### Classifications:
    _id: Autogenerated id
    name: Spectral class name

## RELATIONS

Constellation
    Ngc_M
        NGC
            Supernova
        Messier
    Star
        Classification

1. Constellation - Ngc_M : One to Many
2. Constellation - Star  : One to Many
3. Ngc_M - NGC           : One to One
4. Ngc_M - Messier       : One to One
5. NGC - Supernova       : One to Many
6. Star - Classification : Many to Many

## NORMALIZATION

Ngc_M normalizes relations between NGC, Messier, and Constellation.
HIP id, HR id, HD id, GL id, and BF id were not normalized to increase database query speed.
